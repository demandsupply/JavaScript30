<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ðŸ‘€ðŸ‘€ðŸ‘€Follow Along Nav</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="https://fav.farm/ðŸ”¥" />
  </head>
  <body>
    <nav>
      <ul class="menu">
        <li><a href="">Home</a></li>
        <li><a href="">Order Status</a></li>
        <li><a href="">Tweets</a></li>
        <li><a href="">Read Our History</a></li>
        <li><a href="">Contact Us</a></li>
      </ul>
    </nav>

    <div class="wrapper">
      <p>
        Lorem ipsum dolor sit amet, <a href="">consectetur</a> adipisicing elit.
        Est <a href="">explicabo</a> unde natus necessitatibus esse obcaecati
        distinctio, aut itaque, qui vitae!
      </p>
      <p>
        Aspernatur sapiente quae sint <a href="">soluta</a> modi, atque
        praesentium laborum pariatur earum <a href="">quaerat</a> cupiditate
        consequuntur facilis ullam dignissimos, aperiam quam veniam.
      </p>
      <p>
        Cum ipsam quod, incidunt sit ex <a href="">tempore</a> placeat maxime
        <a href="">corrupti</a> possimus <a href="">veritatis</a> ipsum fugit
        recusandae est doloremque? Hic, <a href="">quibusdam</a>, nulla.
      </p>
      <p>
        Esse quibusdam, ad, ducimus cupiditate <a href="">nulla</a>, quae magni
        odit <a href="">totam</a> ut consequatur eveniet sunt quam provident
        sapiente dicta neque quod.
      </p>
      <p>
        Aliquam <a href="">dicta</a> sequi culpa fugiat
        <a href="">consequuntur</a> pariatur optio ad minima, maxime
        <a href="">odio</a>, distinctio magni impedit tempore enim repellendus
        <a href="">repudiandae</a> quas!
      </p>
    </div>

    <script>
      //  get all the links of the page
      const links = Array.from(document.querySelectorAll("a"));
      const indexesTuple = [];
      const tempArray = ["one", "two", "three", "four", "five"];

      let span = document.createElement("span");
      span.classList.add("highlight");

      let tempIndex = 2;

      function applySizes(link) {
        let xStart = link.offsetLeft;
        let yStart = link.offsetTop;
        let width = link.getBoundingClientRect().width;
        let height = link.getBoundingClientRect().height;

        console.log(
          `sizes: xstart: ${xStart}, ystart: ${yStart}, width: ${width}, height ${height}`
        );
        console.log(`offsetParent: `);
        console.log(link.offsetParent);

        // span.style.transform = `translate(${xStart}px, ${yStart}px)`;
        span.style.top = yStart + "px";
        span.style.left = xStart + "px";
        span.style.width = width + "px";
        span.style.height = height + "px";
      }

      // console.log("tempArray before: ", tempArray);
      // updateIndexes(tempArray, tempIndex);
      // console.log("tempArray after: ", tempArray);

      // indexesTuple.push("haha");

      console.log(links);
      console.log(indexesTuple);

      // trigger function when user hover a link
      links.forEach((link, i) =>
        link.addEventListener("mouseover", () => {
          updateIndexes(indexesTuple, i, links);
          console.log(`updated indexes is ${indexesTuple}`);

          console.log(`current link coordinates: `);

          console.log(link.getBoundingClientRect());

          applySizes(link);
        })
      );

      // save the last link hovered (where the .highligth class will remain)
      function updateIndexes(array, newIndex, arrayOfIndexes) {
        console.log("array is: ", array);
        if (array.length === 0) {
          console.log("array is empty ");
          array[0] = newIndex;
          arrayOfIndexes[newIndex].classList.add("backcolor");
          arrayOfIndexes[newIndex].appendChild(span);
          return;
        } else if (array.length === 1) {
          arrayOfIndexes[array[0]].classList.remove("backcolor");
          array.unshift(newIndex);
          arrayOfIndexes[newIndex].classList.add("backcolor");
          arrayOfIndexes[newIndex].appendChild(span);
          return;
        } else {
          array.unshift(newIndex);
          array.pop();
          arrayOfIndexes[array[1]].classList.remove("backcolor");
          arrayOfIndexes[newIndex].classList.add("backcolor");
          arrayOfIndexes[newIndex].appendChild(span);
          return;
        }
      }

      // when hovering a new link, move the .highligth form the previous link to the current
    </script>
  </body>
</html>
